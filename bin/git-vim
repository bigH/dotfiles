#!/usr/bin/env bash

git_vim() {
  local files targets
  if [ -z "$@" ]; then
    files=$(git status --short --porcelain | cut -c4-) || return
  else
    files=$(git diff --name-only $@) || return
  fi
  targets=$(echo "$files" | fzf -m) || return
  echo $targets &&
  vim -p $(echo "$targets")
}

git_vim "$@"
