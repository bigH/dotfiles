#!/usr/bin/env bash

git_vim_all() {
  local files targets
  if [ $# -eq 0 ]; then
    files=$(git status --short --porcelain | cut -c4- | file-must-exist) || return
  else
    files=$(git diff --name-only "$@" | file-must-exist) || return
  fi
  echo "$files" &&
  $EDITOR $files
}

git_vim_all "$@"

