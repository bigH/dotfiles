#!/usr/bin/env bash

. $DOT_FILES_DIR/sh_utils.sh

git_diff_viewer() {
  PARAMETERS_QUOTED="$(quote_params "$@")"

  git diff --name-only "$@" | \
    fzf --no-height --ansi --no-sort --reverse --multi \
    --bind alt-d:deselect-all --bind alt-a:select-all \
    --preview "git diff $PARAMETERS_QUOTED -- {} | diff-so-fancy"
}

git_diff_viewer "$@"
